{"version":3,"file":"effect-tinder.min.js","names":["swiper","on","draggableSlide","preventInteraction","isTouched","touchStartIndex","isSlideChangeTouched","emitTransitionEnd","swipeDirection","tinder","no","touches","currentX","startX","size","slideEl","slides","activeIndex","translateY","style","transformOrigin","slideNext","animating","yes","withElement","el","cb","setSlidesOrigin","o","pos","forEach","index","setSlideButtonsLabels","progress","diff","isLastSlide","force","document","querySelector","classList","add","labelOpacity","Math","max","min","opacity","remove","params","longSwipesRatio","effect","classNames","push","containerModifierClass","overwriteParams","watchSlidesProgress","virtualTranslate","oneWayMovement","Object","assign","originalParams","addEventListener","e","target","closest","s","clientY","top","height","getBoundingClientRect","contains","diffY","currentY","startY","diffX","abs","requestAnimationFrame","duration","transitionDuration","querySelectorAll","labelEl","length","loop","slideProgress","emit","currentTranslate","snapGrid","currentSlideTranslate","maxTranslate","setTranslate","slideIndex","tX","swiperSlideOffset","tY","tZ","rotate","transform","tinderTransform","tinderTransformSlideIndex","zIndex","round"],"sources":["../demo-vite/effect-tinder.esm.js"],"sourcesContent":["export default function EffectTinder({ swiper, on }) {\n  let draggableSlide;\n  let preventInteraction;\n  let isTouched;\n\n  let touchStartIndex;\n  let isSlideChangeTouched;\n  let emitTransitionEnd;\n\n  let swipeDirection;\n  swiper.tinder = {\n    no() {\n      swiper.touches.currentX = 0;\n      swiper.touches.startX = swiper.size / 2;\n      const slideEl = swiper.slides[swiper.activeIndex];\n      slideEl.translateY = 0;\n      slideEl.style.transformOrigin = `center bottom`;\n      slideEl.transformOrigin = 'bottom';\n      swiper.slideNext();\n      swiper.animating = false;\n    },\n    yes() {\n      swiper.touches.currentX = swiper.size;\n      swiper.touches.startX = swiper.size / 2;\n      const slideEl = swiper.slides[swiper.activeIndex];\n      slideEl.translateY = 0;\n      slideEl.style.transformOrigin = `center bottom`;\n      slideEl.transformOrigin = 'bottom';\n      swiper.slideNext();\n      swiper.animating = false;\n    },\n  };\n  const withElement = (el, cb) => {\n    if (el) cb(el);\n  };\n\n  const setSlidesOrigin = (o, pos) => {\n    swiper.slides.forEach((el, index) => {\n      if (index < swiper.activeIndex) return;\n      el.style.transformOrigin = o;\n      el.transformOrigin = pos;\n    });\n  };\n\n  const setSlideButtonsLabels = (\n    slideEl,\n    progress,\n    diff,\n    isLastSlide,\n    force,\n  ) => {\n    if (!isTouched && !force) return;\n    if (!isLastSlide) {\n      const labelOpacity = Math.max(Math.min(-0.5 + progress * 10, 1), 0);\n      withElement(\n        slideEl.querySelector('.swiper-tinder-label-yes'),\n        (el) => (el.style.opacity = diff > 0 ? labelOpacity : 0),\n      );\n      withElement(\n        slideEl.querySelector('.swiper-tinder-label-no'),\n        (el) => (el.style.opacity = diff < 0 ? labelOpacity : 0),\n      );\n      withElement(document.querySelector('.swiper-tinder-button-yes'), (el) =>\n        el.classList.remove('swiper-tinder-button-hidden'),\n      );\n      withElement(document.querySelector('.swiper-tinder-button-no'), (el) =>\n        el.classList.remove('swiper-tinder-button-hidden'),\n      );\n      if (progress >= swiper.params.longSwipesRatio && !isLastSlide) {\n        if (diff > 0) {\n          withElement(\n            document.querySelector('.swiper-tinder-button-yes'),\n            (el) => el.classList.add('swiper-tinder-button-active'),\n          );\n\n          withElement(\n            document.querySelector('.swiper-tinder-button-no'),\n            (el) => el.classList.remove('swiper-tinder-button-active'),\n          );\n        } else {\n          withElement(\n            document.querySelector('.swiper-tinder-button-yes'),\n            (el) => el.classList.remove('swiper-tinder-button-active'),\n          );\n\n          withElement(\n            document.querySelector('.swiper-tinder-button-no'),\n            (el) => el.classList.add('swiper-tinder-button-active'),\n          );\n        }\n      } else {\n        withElement(document.querySelector('.swiper-tinder-button-yes'), (el) =>\n          el.classList.remove('swiper-tinder-button-active'),\n        );\n        withElement(document.querySelector('.swiper-tinder-button-no'), (el) =>\n          el.classList.remove('swiper-tinder-button-active'),\n        );\n      }\n    } else {\n      withElement(document.querySelector('.swiper-tinder-button-yes'), (el) =>\n        el.classList.add('swiper-tinder-button-hidden'),\n      );\n      withElement(document.querySelector('.swiper-tinder-button-no'), (el) =>\n        el.classList.add('swiper-tinder-button-hidden'),\n      );\n    }\n  };\n  on('beforeInit', () => {\n    if (swiper.params.effect !== 'tinder') return;\n    swiper.classNames.push(`${swiper.params.containerModifierClass}tinder`);\n    swiper.classNames.push(`${swiper.params.containerModifierClass}3d`);\n    const overwriteParams = {\n      watchSlidesProgress: true,\n      virtualTranslate: true,\n      longSwipesRatio: 0.1,\n      oneWayMovement: true,\n    };\n\n    Object.assign(swiper.params, overwriteParams);\n    Object.assign(swiper.originalParams, overwriteParams);\n  });\n  on('init', () => {\n    if (swiper.el && swiper.el.addEventListener) {\n      swiper.el.addEventListener('click', (e) => {\n        if (e.target.closest('.swiper-tinder-button-yes')) swiper.tinder.yes();\n        if (e.target.closest('.swiper-tinder-button-no')) swiper.tinder.no();\n      });\n    }\n  });\n  on('touchStart', (s, e) => {\n    if (swiper.params.effect !== 'tinder') return;\n    isTouched = true;\n    isSlideChangeTouched = true;\n    emitTransitionEnd = true;\n    const { clientY } = e;\n    const { top, height } = swiper.el.getBoundingClientRect();\n    preventInteraction = false;\n    const slideEl = e.target.closest('.swiper-slide, swiper-slide');\n    if (!slideEl) return;\n    if (!slideEl.classList.contains('swiper-slide-active')) return;\n    draggableSlide = slideEl;\n    touchStartIndex = swiper.activeIndex;\n\n    if (clientY - top > height / 2) {\n      setSlidesOrigin('center top', 'top');\n    } else {\n      setSlidesOrigin('center bottom', 'bottom');\n    }\n  });\n  on('touchMove', (s) => {\n    if (swiper.params.effect !== 'tinder') return;\n    const diffY = s.touches.currentY - s.touches.startY;\n    const diffX = s.touches.currentX - s.touches.startX;\n    if (Math.abs(diffX) > swiper.size * 0.95) {\n      preventInteraction = false;\n    } else {\n      preventInteraction = false;\n    }\n    if (!draggableSlide) return;\n    draggableSlide.translateY = diffY;\n  });\n\n  on('touchEnd', () => {\n    if (swiper.params.effect !== 'tinder') return;\n    preventInteraction = false;\n    isSlideChangeTouched = false;\n    requestAnimationFrame(() => {\n      isTouched = false;\n    });\n  });\n\n  on('setTransition', (s, duration) => {\n    if (swiper.params.effect !== 'tinder') return;\n    s.slides.forEach((slideEl) => {\n      slideEl.style.transitionDuration = `${duration}ms`;\n      slideEl.querySelectorAll('.swiper-tinder-label').forEach((labelEl) => {\n        labelEl.style.transitionDuration = `${duration}ms`;\n        if (slideEl.progress <= 0) {\n          labelEl.style.opacity = 0;\n        }\n      });\n    });\n    requestAnimationFrame(() => {\n      withElement(document.querySelector('.swiper-tinder-button-yes'), (el) =>\n        el.classList.remove('swiper-tinder-button-active'),\n      );\n      withElement(document.querySelector('.swiper-tinder-button-no'), (el) =>\n        el.classList.remove('swiper-tinder-button-active'),\n      );\n    });\n  });\n\n  on('slideChange', () => {\n    const isLastSlide =\n      swiper.activeIndex === swiper.slides.length - 1 && !swiper.params.loop;\n    if (isLastSlide) {\n      const slideEl = swiper.slides[swiper.slides.length - 1];\n      const slideProgress = slideEl.progress;\n      const progress = Math.min(Math.max(slideProgress, -2), 2);\n      const diff = swiper.touches.currentX - swiper.touches.startX;\n      setSlideButtonsLabels(slideEl, progress, diff, true, true);\n    }\n    if (!isSlideChangeTouched) {\n      emitTransitionEnd = false;\n      swiper.emit('tinderSwipe', swipeDirection < 0 ? 'left' : 'right');\n    }\n  });\n\n  on('transitionStart', () => {\n    if (emitTransitionEnd && swiper.activeIndex !== touchStartIndex) {\n      emitTransitionEnd = false;\n      swiper.emit('tinderSwipe', swipeDirection < 0 ? 'left' : 'right');\n    }\n  });\n\n  on('setTranslate', (s, currentTranslate) => {\n    if (swiper.params.effect !== 'tinder') return;\n    if (preventInteraction) return;\n    if (\n      isSlideChangeTouched &&\n      typeof touchStartIndex !== 'undefined' &&\n      typeof swiper.snapGrid[touchStartIndex + 1] !== 'undefined'\n    ) {\n      const currentSlideTranslate = Math.abs(swiper.snapGrid[touchStartIndex]);\n      const maxTranslate = Math.abs(currentSlideTranslate + swiper.size) - 8;\n\n      if (Math.abs(currentTranslate) > maxTranslate) {\n        swiper.setTranslate(-maxTranslate);\n        return;\n      }\n    }\n\n    const diff = swiper.touches.currentX - swiper.touches.startX;\n    swipeDirection = diff;\n    const { slides } = swiper;\n    const isLastSlide =\n      swiper.activeIndex === slides.length - 1 && !swiper.params.loop;\n    slides.forEach((slideEl, slideIndex) => {\n      const slideProgress = slideEl.progress;\n      const progress = Math.min(Math.max(slideProgress, -2), 2);\n      const offset = slideEl.swiperSlideOffset;\n      let tX = -offset;\n      let tY = 0;\n      let tZ = 100 * progress;\n      let rotate = 0;\n      let opacity = 1;\n      if (progress > 0 || (progress === 0 && isTouched)) {\n        tZ = 0;\n        rotate = 45 * progress * (diff < 0 ? -1 : 1);\n        tX = swiper.size * (diff < 0 ? -1 : 1) * progress + tX;\n\n        if (typeof slideEl.translateY !== 'undefined') {\n          tY = slideEl.translateY;\n        }\n\n        setSlideButtonsLabels(slideEl, progress, diff, isLastSlide);\n      }\n      if (slideEl.transformOrigin === 'top') {\n        rotate = -rotate;\n      }\n\n      if (progress > 1) {\n        opacity = (1.2 - progress) * 5;\n      }\n      const transform = `\n        translate3d(${tX}px, ${tY}px, ${tZ}px)\n        rotateZ(${rotate}deg)\n      `;\n      if (progress >= 1 && !slideEl.tinderTransform) {\n        slideEl.tinderTransform = transform;\n        slideEl.tinderTransformSlideIndex = slideIndex;\n      }\n      if (\n        (slideEl.tinderTransform &&\n          slideEl.tinderTransformSlideIndex !== slideIndex) ||\n        !isTouched\n      ) {\n        slideEl.tinderTransform = '';\n      }\n      slideEl.style.zIndex =\n        -Math.abs(Math.round(slideProgress)) + slides.length;\n      slideEl.style.transform = slideEl.tinderTransform || transform;\n      slideEl.style.opacity = opacity;\n    });\n  });\n}\n"],"mappings":"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"}